<!doctype html>
<meta charset="utf-8" />
<title>Alma Chat</title>
<style>
  body { font-family: Arial, sans-serif; max-width: 600px; margin: 40px auto; padding: 0 16px; }
  h1 { font-size: 28px; }
  .row { display: flex; gap: 10px; margin-bottom: 10px; }
  input { flex: 1; padding: 10px; font-size: 16px; }
  button { padding: 10px; font-size: 16px; background: #3b82f6; color: #fff; border: none; cursor: pointer; }
  #chat { border: 1px solid #ccc; padding: 10px; height: 300px; overflow-y: auto; background: #fafafa; }
  .msg { margin: 5px 0; }
  .user { font-weight: bold; color: #333; }
  .alma { color: #3b82f6; }
</style>

<h1>Alma Chat</h1>

<div id="chat"></div>

<div class="row">
  <input id="q" placeholder="Escreve a tua mensagem...">
  <button id="ask">Enviar</button>
</div>

<script>
const API_BASE = "https://almabody-alma-1.up.railway.app"; // teu backend

function addMsg(sender, text) {
  const chat = document.getElementById("chat");
  const div = document.createElement("div");
  div.className = "msg " + sender;
  div.innerHTML = `<span class="${sender}">${sender === "user" ? "Tu" : "Alma"}:</span> ${text}`;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

document.getElementById("ask").onclick = async () => {
  const text = document.getElementById("q").value.trim();
  if (!text) return;
  addMsg("user", text);
  document.getElementById("q").value = "";

  try {
    const res = await fetch(API_BASE + "/say", { // usar o teu endpoint que devolve texto
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ text })
    });

    if (!res.ok) {
      addMsg("alma", "Erro: " + res.status);
      return;
    }

    const data = await res.json();
    // Assumindo que a tua API devolve { reply: "...texto..." }
    addMsg("alma", data.reply || JSON.stringify(data));

  } catch (e) {
    addMsg("alma", "Erro: " + e.message);
  }
};
</script>
